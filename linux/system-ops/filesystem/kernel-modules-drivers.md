# Kernel Modules (Drivers)

## <mark style="color:red;">Enumerate</mark>

<table data-header-hidden data-full-width="true"><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>uname -a</code></td><td>Prints kernel name, release, and version.</td></tr><tr><td><code>uname -r</code></td><td>Prints just the kernel release.</td></tr><tr><td><code>lsmod</code></td><td>Lists currently loaded kernel modules.</td></tr><tr><td><code>cat /proc/modules</code></td><td>Displays similar output to <code>lsmod</code>, directly from a virtual file in the proc filesystem.</td></tr><tr><td><code>ls /usr/lib/modules</code></td><td>Lists installed kernel module directories.</td></tr><tr><td><code>ls /lib/modules/$(uname -r)</code></td><td>Lists all available kernel modules in the default module directory for the current kernel version.</td></tr><tr><td><code>ls /lib/modules/$(uname -r)/kernel/drivers</code></td><td>Lists available driver modules for the current kernel.</td></tr><tr><td><code>ls /lib/modules/$(uname -r)/extra</code></td><td>Lists extra kernel modules.</td></tr><tr><td><code>modinfo &#x3C;module_name></code></td><td>Retrieves detailed information about a specific kernel module.</td></tr><tr><td><code>systemctl list-units --type=kmod</code></td><td>Lists kernel modules managed as systemd services.</td></tr><tr><td><code>modprobe -n &#x3C;module_name></code></td><td>Simulates loading a module without actually loading it.</td></tr><tr><td><code>modprobe -v &#x3C;module_name></code></td><td>Verbosely loads a kernel module, providing detailed output.</td></tr><tr><td><code>modprobe -l</code></td><td>Lists available modules that can be loaded.</td></tr><tr><td><code>find /lib/modules/$(uname -r)/ -type f -name '*.ko' -exec ls {} ;</code></td><td>Enumerate kernel modules in the directory corresponding to the running kernel version</td></tr></tbody></table>



## <mark style="color:red;">Modify</mark>

<table data-header-hidden><thead><tr><th width="283">Command</th><th>Description</th></tr></thead><tbody><tr><td><code>depmod -a</code></td><td>Updates module dependency information.</td></tr><tr><td><code>modprobe &#x3C;mod_name></code></td><td>Loads a kernel module if it's not already loaded.</td></tr><tr><td><code>modprobe -r &#x3C;mod_name></code></td><td>Unloads a module.</td></tr><tr><td><code>insmod &#x3C;module_file></code></td><td>Manually loads a module (less common).</td></tr><tr><td><code>insmod &#x3C;module_path></code></td><td>Manually inserts module into the kernel. Use with caution.</td></tr><tr><td><code>rmmod &#x3C;module_name></code></td><td>Removes (unloads) a loaded kernel module.</td></tr><tr><td><code>modconf</code></td><td>Configures kernel modules interactively.</td></tr></tbody></table>



## <mark style="color:red;">File Locations</mark>

<table data-header-hidden data-full-width="true"><thead><tr><th width="437">Directory/File</th><th>Description</th></tr></thead><tbody><tr><td>modprobe.d</td><td>Directory containing configuration files for module options (/etc/modprobe.d/ on many systems).</td></tr><tr><td>/sys/module</td><td>Directory containing information and configuration for loaded kernel modules.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/</td><td>Directory containing kernel modules, where you can add or remove modules.</td></tr><tr><td>/etc/modules</td><td>File where you can list modules to be automatically loaded during system startup.</td></tr><tr><td>/etc/modprobe.d/</td><td>Directory for custom module configuration files.</td></tr><tr><td>/etc/modprobe.conf</td><td>Older file for configuring module options (may not be present on all systems).</td></tr><tr><td>/proc/modules</td><td>File listing currently loaded modules (read-only).</td></tr><tr><td>/proc/sys/kernel/modules_disabled</td><td>File to control module loading (0 for enabled, 1 for disabled).</td></tr><tr><td>/sbin/lsmod</td><td>Location of the lsmod command executable.</td></tr><tr><td>/sbin/modprobe</td><td>Location of the modprobe command executable.</td></tr><tr><td>/sbin/insmod</td><td>Location of the insmod command executable.</td></tr><tr><td>/sbin/rmmod</td><td>Location of the rmmod command executable.</td></tr><tr><td>/sbin/depmod</td><td>Location of the depmod command executable.</td></tr><tr><td>/usr/bin/modinfo</td><td>Location of the modinfo command executable.</td></tr><tr><td>/usr/sbin/modconf</td><td>Location of the modconf command executable.</td></tr><tr><td>/usr/share/modprobe/</td><td>Directory containing module utilities and scripts.</td></tr><tr><td>/usr/share/doc/module-init-tools/</td><td>Location of module initialization tools documentation (may vary by distribution).</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/kernel/</td><td>Directory containing kernel module files.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/modules.dep</td><td>File containing module dependency information.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/modules.alias</td><td>File containing module alias information.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/modules.symbols</td><td>File containing module symbol version information.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/modules.symbols.bin</td><td>Binary version of the module symbols file.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/modules.builtin</td><td>File listing built-in modules.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/modules.order</td><td>File defining module load order.</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/build</td><td>Symbolic link to the kernel source directory (may not be present on all systems).</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/source</td><td>Symbolic link to the kernel source directory (may not be present on all systems).</td></tr><tr><td>/lib/modules/&#x3C;kernel_version>/extra</td><td>Directory where some distributions store additional modules.</td></tr></tbody></table>
